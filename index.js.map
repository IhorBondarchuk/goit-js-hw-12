{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport const galleryElement = document.querySelector('.gallery');\nconst loaderElement = document.querySelector('.loader');\nexport const loadMoreBtn = document.querySelector('.load-more-button');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionsDelay: 250,\n});\n\nexport function createGallery(images) {\n    const markup = images.map(({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) => \n        `\n    <li class=\"gallery-item\">\n    <div class=\"image-box\">\n    <a href=\"${largeImageURL}\" class=\"gallery-link\">\n        <img\n        src=\"${webformatURL}\" \n        alt=\"${tags}\" \n        class=\"gallery-image\">\n    </a>\n    </div>\n    <ul class=\"image-stats\">\n  <li class=\"image-stat-item\">\n    <h4>Likes</h4>\n    <p>${likes}</p>\n  </li>\n  <li class=\"image-stat-item\">\n    <h4>Views</h4>\n    <p>${views}</p>\n  </li>\n  <li class=\"image-stat-item\">\n    <h4>Comments</h4>\n    <p>${comments}</p>\n  </li>\n  <li class=\"image-stat-item\">\n    <h4>Downloads</h4>\n    <p>${downloads}</p>\n  </li>\n</ul>\n</li>\n    `\n    ).join('');\n\n    galleryElement.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n};\n\nexport function clearGallery() {\n    galleryElement.innerHTML = \"\";\n};\n\n\nexport function showLoader() {\n    loaderElement.classList.remove('is-hidden');\n};\n\nexport function hideLoader() {\n    loaderElement.classList.add('is-hidden');\n};\n\nexport function showLoadMoreButton() {\n    loadMoreBtn.style.display = \"block\";\n};\n\nexport function hideLoadMoreButton() {\n    loadMoreBtn.style.display = \"none\";\n};\n\nexport function scrollPage(pxY) {\n    window.scrollBy({\n        top: pxY,\n        left: 0,\n        behavior: \"smooth\",\n    });\n};\n\nexport function getHeightImageCard(elem) {\n    const rect = elem[0].getBoundingClientRect();\n    return (rect.height + 24) * 2;\n};","import axios from \"axios\";\n\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst API_KEY = \"52835014-1fa6accc1c58d324fc268a772\";\nexport const PER_PAGE = 15;\n\nexport async function getImagesByQuery(query, page) {\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: query,\n        page,\n        per_page: PER_PAGE,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\"\n    });\n\n    return axios.get(`${BASE_URL}?${params}`);\n}","import iziToast from \"izitoast\";\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { clearGallery, createGallery, galleryElement, getHeightImageCard, hideLoader, hideLoadMoreButton, loadMoreBtn, scrollPage, showLoader, showLoadMoreButton } from \"./js/render-functions\";\nimport { getImagesByQuery, PER_PAGE } from \"./js/pixabay-api\";\n\nconst formElement = document.querySelector('.form');\n\nformElement.addEventListener(\"submit\", handlerSubmitForm);\nloadMoreBtn.addEventListener(\"click\", onLoadMore);\n\nlet page = 1;\nlet query = \"\";\nlet totalPages = 0;\n\nasync function handlerSubmitForm(evt) {\n    evt.preventDefault();\n\n    query = evt.target.elements['search-text'].value.trim();\n\n    if (!query) {\n        iziToast.warning({\n            message: \"Please enter a search query\",\n            position: 'topRight',\n            timeout: 4000,\n        });\n        return;\n    };\n    page = 1;\n    clearGallery();\n    hideLoadMoreButton();\n    showLoader();\n\n\n    try {\n        const {data} = await getImagesByQuery(query, page);\n        if (!data.hits || data.hits.length === 0) {\n            iziToast.info({\n                    message: \"Sorry, there are no images matching your search query. Please try again!\",\n                    position: \"topRight\",\n                    timeout: 4000,\n                });\n            return;\n        }\n\n        createGallery(data.hits);\n        totalPages = Math.ceil(data.totalHits / PER_PAGE);\n        if (page < totalPages) {\n            showLoadMoreButton();\n            page += 1;\n        }\n        else {\n            hideLoadMoreButton();\n            iziToast.info({\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    position: \"topRight\",\n                    timeout: 4000,\n                });\n\n        }\n\n\n    } catch (error) {\n        hideLoadMoreButton();\n        iziToast.error({\n            message: \"ERROR\",\n            position: \"topRight\",\n            timeout: 4000,\n        });\n    }\n    finally {\n        formElement.reset();\n        hideLoader();\n    };\n\n};\n\nasync function onLoadMore() {\n    hideLoadMoreButton();\n    showLoader();\n\n    try {\n        const { data } = await getImagesByQuery(query, page);\n\n        if (!data.hits || data.hits.length === 0) {\n            hideLoadMoreButton();\n            iziToast.info({\n                message: \"Sorry, no more images found.\",\n                position: 'topRight',\n                timeout: 4000,\n            });\n            return;\n        }\n        createGallery(data.hits);\n        scrollPage(getHeightImageCard(galleryElement.children));\n        totalPages = Math.ceil(data.totalHits / PER_PAGE);\n        if (page < totalPages) {\n            page += 1;\n            showLoadMoreButton();\n            \n        }\n        else {\n            hideLoadMoreButton();\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n                timeout: 4000,\n            })\n        }\n    }\n    catch (error) {\n        iziToast.error({\n            message: \"ERROR\",\n            position: 'topRight',\n            timeout: 4000,\n        });\n        hideLoadMoreButton();\n    }\n    finally {\n        hideLoader();\n    }\n    \n}"],"names":["galleryElement","loaderElement","loadMoreBtn","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","scrollPage","pxY","getHeightImageCard","elem","BASE_URL","API_KEY","PER_PAGE","getImagesByQuery","query","page","params","axios","formElement","handlerSubmitForm","onLoadMore","totalPages","evt","iziToast","data"],"mappings":"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"}